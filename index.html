<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Snack Store</title>

<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>

<style>
body{font-family:Arial;direction:rtl;margin:0;background:#f5f5f5}
header{background:#ff6600;color:#fff;padding:10px;text-align:center}
#search{width:90%;padding:8px;margin:10px;border-radius:5px;border:none}
.container{display:flex}
.products{flex:3;display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:10px;padding:10px}
.product{background:#fff;padding:10px;border-radius:10px;text-align:center}
.product img{width:90px;height:90px}
.ads{flex:1;padding:10px}
.ads img{width:100%;margin-bottom:10px;border-radius:10px}
.cart{position:fixed;bottom:0;right:0;background:#fff;width:100%;max-height:50%;overflow:auto;display:none;padding:10px}
button{background:green;color:#fff;border:none;padding:5px 8px;border-radius:5px}
</style>
</head>
<body>

<header>Snack Store</header>
<input id="search" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØªØ¬">

<div class="container">
<div class="products" id="products"></div>

<div class="ads">
<h3>Ø¥Ø¹Ù„Ø§Ù†Ø§Øª</h3>
<img src="https://via.placeholder.com/200x200?text=Ad">
</div>
</div>

<div class="cart" id="cart">
<h3>Ø§Ù„Ø³Ù„Ø©</h3>
<ul id="cartItems"></ul>
<p>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: <span id="total">0</span> Ø¬</p>

<h4>Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ù„Ø¨</h4>
<input id="name" placeholder="Ø§Ù„Ø§Ø³Ù…"><br><br>
<input id="phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ"><br><br>
<input id="location" placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù†"><br><br>
<button onclick="submitOrder()">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨</button>
</div>

<button onclick="toggleCart()" style="position:fixed;bottom:60px;left:10px;">ğŸ›’</button>

<script>
const firebaseConfig = {
 apiKey:"PUT_HERE",
 authDomain:"PUT_HERE",
 databaseURL:"PUT_HERE",
 projectId:"PUT_HERE"
};

firebase.initializeApp(firebaseConfig);
const db=firebase.database();
let cart=[];

db.ref("products").on("value",snap=>{
 let div=document.getElementById("products");
 div.innerHTML="";
 snap.forEach(c=>{
  let p=c.val();
  div.innerHTML+=`<div class="product">
  <img src="${p.img}">
  <h4>${p.name}</h4>
  <p>${p.price} Ø¬</p>
  <button onclick="addToCart('${p.name}',${p.price})">Ø£Ø¶Ù</button>
  </div>`;
 });
});

function addToCart(n,p){cart.push({n,p});alert("Ø§ØªØ¶Ø§Ù");}
function toggleCart(){let c=document.getElementById("cart");c.style.display=c.style.display=="block"?"none":"block";updateCart();}
function updateCart(){let ul=document.getElementById("cartItems");ul.innerHTML="";let t=0;cart.forEach(i=>{ul.innerHTML+=`<li>${i.n}-${i.p}Ø¬</li>`;t+=Number(i.p)});document.getElementById("total").innerText=t;}

function submitOrder(){
 let order={
  name:document.getElementById("name").value,
  phone:document.getElementById("phone").value,
  location:document.getElementById("location").value,
  items:cart
 };
 db.ref("orders").push(order);
 alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨");
 cart=[];updateCart();
}

document.getElementById("search").addEventListener("input",e=>{
 let v=e.target.value.toLowerCase();
 db.ref("products").once("value",snap=>{
  let div=document.getElementById("products");div.innerHTML="";
  snap.forEach(c=>{
   let p=c.val();
   if(p.name.toLowerCase().includes(v)){
    div.innerHTML+=`<div class="product">
    <img src="${p.img}">
    <h4>${p.name}</h4>
    <p>${p.price} Ø¬</p>
    <button onclick="addToCart('${p.name}',${p.price})">Ø£Ø¶Ù</button></div>`;
   }
  });
 });
});
</script>

</body>
</html>
